//devin87@qq.com
//build:2018/01/19 16:51:17
!function(t){"use strict";function a(a){var e=this;if(e.ops=a,e.size=a.size||9,e.cache={},a.href==t){var i=a.boxNav;i&&$(i).on("click","li",function(){e.go($(this).attr("x")),e.onclick&&e.onclick.call(e,e.page)})}else a.cache=a.preload=!1;e.set(a.totalCount,a.pageSize||10).setData(a.data).go(a.page)}var e=Q.extend,i={prevPage:"&lt;上一页",nextPage:"下一页&gt;",pageSize:"每页{0}条",totalCount:"共{0}条数据"};(0,Q.factory)(a).extend({set:function(a,e){return a!=t&&(this.totalCount=a),e!=t&&(this.pageSize=e),this.totalCount!=t&&(this.totalPage=Math.ceil(this.totalCount/this.pageSize)),this},setData:function(t){return t&&(this.data=t,this.set(t.length)),this},_load:function(a,e){var i=this,n=i.ops,s=i.onload;i.page=a;var o=function(t){return s&&s.call(i,t),e&&e.call(i,t),i};if(!n.load){var r=i.pageSize,h=(a-1)*r;return o(i.data.slice(h,h+r))}var l=n.cache?i.cache[a]:t;return l?o(l):(n.load(a,function(t){l=t.data||[],n.cache&&(i.cache[a]=l),i.set(t.totalCount,t.pageSize),o(l)}),i)},load:function(t){return this._load(t,this.draw)},reload:function(t){return this.load(t||this.page)},go:function(a,e){return isNaN(a)?this:(a=+a,this.totalPage!=t&&a>this.totalPage&&(a=this.totalPage),a<1&&(a=1),a!=this.page||e?(this.load(a),this.ops.load&&this.ops.preload&&this._load(a+1),this.onchange&&this.onchange.call(this,a),this):this)},drawNav:function(){var a=this.ops,e=a.boxNav;if(!e)return this;var n=this.totalCount,s=this.pageSize,o=this.totalPage,r=this.page,h=a.href,l=a.text||{},c=function(t,a,e){var i=[1];if(1==a)return i;var n,s=2;if(a<=t)n=a;else{var o=(t-5)/2;e<=o+3?n=t-2:e>a-o-3?(s=a-t+3,n=a-1):n=(s=e-~~o)+t-5}s>2&&i.push(0);for(var r=s;r<=n;r++)i.push(r);return a>t&&(n<a-1&&i.push(0),i.push(a)),i}(this.size,o,r);h!=t&&(h+=-1!=h.indexOf("?")?"&":"?");var u=function(t,a,e){return e||(e=t==r?"on":t?"":"skip"),"<li"+(e?' class="'+e+'"':"")+' x="'+t+'">'+(h?"<a"+(t?' href="'+h+"page="+t+'"':"")+">"+a+"</a>":a)+"</li>"},p=a.drawSize||function(t,a,e){return a+"/"+e},g='<div class="inline-block pager-bar'+(h?" pager-link":"")+'"><ul>'+u(Math.max(r-1,1),l.prev||i.prevPage,"prev")+c.map(function(t){return u(t,t||"…")}).join("")+u(Math.min(r+1,o),l.next||i.nextPage,"next")+"</ul></div>"+(!1!==a.showSize?'<div class="inline-block pager-count">'+p(this,i.pageSize.replace("{0}",'<span class="page-size">'+s+"</span>"),i.totalCount.replace("{0}",'<span class="total-count">'+n+"</span>"))+"</div>":"");$(e).html(g)},draw:function(t){return this.drawNav(),this.ops.draw.call(this,t),this}}),a.setLang=function(t){e(i,t,!0)},Q.DataPager=a}();