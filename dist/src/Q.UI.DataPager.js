//devin87@qq.com
//build:2018/12/18 10:52:41
!function(h){"use strict";var t=Q.extend,a=Q.factory,d={prevPage:"&lt;上一页",nextPage:"下一页&gt;",pageSize:"每页{0}条",totalCount:"共{0}条数据"};function e(a){var t=this;if(t.ops=a,t.size=a.size||9,t.cache={},a.href==h){var e=a.boxNav;e&&$(e).on("click","li",function(){t.go($(this).attr("x")),t.onclick&&t.onclick.call(t,t.page)})}else a.cache=a.preload=!1;t.set(a.totalCount,a.pageSize||a.pageCount||10).setData(a.data).go(a.page)}a(e).extend({set:function(a,t){var e=this;return a!=h&&(e.totalCount=a),t!=h&&(e.pageSize=t),e.totalCount!=h&&(e.totalPage=Math.ceil(e.totalCount/e.pageSize)),e},setData:function(a){return a&&(this.data=a,this.set(a.length)),this},_load:function(t,e){var n=this,o=n.ops,i=n.onload;n.page=t;var r=function(a){return i&&i.call(n,a),e&&e.call(n,a),n};if(!o.load){var a=n.pageSize,l=(t-1)*a;return r(n.data.slice(l,l+a))}var s=o.cache?n.cache[t]:h;return s?r(s):(o.load(t,function(a){s=a.data||[],o.cache&&(n.cache[t]=s),n.set(a.totalCount,a.pageSize||a.pageCount),r(s)}),n)},load:function(a){return this._load(a,this.draw)},reload:function(a){return this.load(a||this.page)},go:function(a,t){var e=this;return isNaN(a)?e:(a=+a,e.totalPage!=h&&a>e.totalPage&&(a=e.totalPage),a<1&&(a=1),(a!=e.page||t)&&(e.load(a),e.ops.load&&e.ops.preload&&e._load(a+1),e.onchange&&e.onchange.call(e,a)),e)},drawNav:function(){var a=this,t=a.ops,e=t.boxNav;if(!e)return a;var n=a.totalCount,o=a.pageSize,i=a.totalPage,r=a.page,l=t.href,s=t.text||{},c=function(a,t,e){var n=[1];if(1==t)return n;var o,i=2;if(t<=a)o=t;else{var r=(a-5)/2;o=e<=r+3?a-2:t-r-3<e?(i=t-a+3,t-1):(i=e-~~r)+a-5}2<i&&n.push(0);for(var l=i;l<=o;l++)n.push(l);return a<t&&(o<t-1&&n.push(0),n.push(t)),n}(a.size,i,r);l!=h&&(l+=-1!=l.indexOf("?")?"&":"?");var u=function(a,t,e){return e||(e=a==r?"on":a?"":"skip"),"<li"+(e?' class="'+e+'"':"")+' x="'+a+'">'+(l?"<a"+(a?' href="'+l+"page="+a+'"':"")+">"+t+"</a>":t)+"</li>"},p=t.drawSize||function(a,t,e){return t+"/"+e},g='<div class="inline-block pager-bar'+(l?" pager-link":"")+'"><ul>'+u(Math.max(r-1,1),s.prev||d.prevPage,"prev")+c.map(function(a){return u(a,a||"…")}).join("")+u(Math.min(r+1,i),s.next||d.nextPage,"next")+"</ul></div>"+(!1!==t.showSize?'<div class="inline-block pager-count">'+p(a,d.pageSize.replace("{0}",'<span class="page-size">'+o+"</span>"),d.totalCount.replace("{0}",'<span class="total-count">'+n+"</span>"))+"</div>":"");$(e).html(g)},draw:function(a){return this.drawNav(),this.ops.draw.call(this,a),this}}),e.setLang=function(a){t(d,a,!0)},Q.DataPager=e}();