//devin87@qq.com
//build:2020/03/26 15:30:46
!function(a){"use strict";var i,k=Q.G,p=k.document,m=Q.isObject,_=Q.isFunc,b=Q.isUNum,g=Q.isUInt,y=Q.def,C=Q.fire,H=Q.async,o=Q.extend,n=Q.makeArray,z=Q.getStyle,s=Q.setStyle,w=Q.getFirst,E=Q.getNext,M=Q.width,S=Q.height,I=Q.createEle,e=Q.removeEle,L=Q.show,B=Q.hide,r=Q.isHidden,W=Q.addClass,D=Q.setCssIfNot,N=Q.setCenter,c=Q.setInputError,u=Q.setInputDefault,U=Q.clearSelection,l=Q.query,t=Q.factory,X=Q.ie<7,j=Q.view,T=Q.event,h={color:"#999",opacity:.3};function A(t){var e=I("div","x-mask");Q.body.appendChild(e),X&&(e.style.height=j.getScrollHeight()+"px"),this.box=e,this.set(o(t||{},h)),this.count=r(e)?0:1}function O(){return i?(i.show(),i):i=new A}t(A).extend({opacity:function(t){return this.set({opacity:t})},set:function(t){var i=this.box;return Object.forEach(t,function(t,e){e!==a&&s(i,"color"!=t?t:"backgroundColor",e)}),this},show:function(){return this.removed&&(Q.body.appendChild(this.box),this.removed=!1),L(this.box),this.count++,this},hide:function(){return 0<this.count&&this.count--,this.count<=0&&B(this.box),this},remove:function(){return e(this.box),this.removed=!0,this.count=0,this}});var R,Y,q=1e3,F=q;function d(t){C(t,this),this._apis=[],this.start()}function P(p,t){return new d(function(){1!=p.nodeType?p=(t=p).ele:(t=t||{}).ele=p;var n,o,s,r,a,c,u,l,h=this,d=t.range||{x:0,y:0},i=!!t.shadow,f=p.offsetWidth,x=p.offsetHeight,v=p;i&&(Y||(Y=I("div","x-drag-shadow"),Q.body.appendChild(Y)),v=Y),h.ops=t,h.doDown=function(t){s=t.clientX,r=t.clientY;var e=i?$(p).offset():$(p).position();n=e.left,o=e.top,i&&Object.forEach({left:n,top:o,width:f,height:x},function(t,e){v.style[t]=e+"px"})},h.doMove=function(t){if(L(v),u){a=t.clientX-s;var e=n+a;d&&(e<d.x?e=d.x:d.w&&e+f>d.x+d.w&&(e=d.x+d.w-f)),v.style.left=e+"px"}if(l){c=t.clientY-r;var i=o+c;d&&(i<d.y?i=d.y:d.h&&i+x>d.y+d.h&&(i=d.y+d.h-x)),v.style.top=i+"px"}},i&&(h.doUp=function(){B(v),p.style.left=p.offsetLeft+a+"px",p.style.top=p.offsetTop+c+"px"}),h.setLock=function(t,e){return u=t,l=e,h.pause(!t&&!e)},h.setRange=function(t,e,i,n){return d=m(t)?t:{x:t,y:e,w:i,h:n},h},h.setLock(!1!==t.isX,!1!==t.isY)})}function f(t){this._es=[],C(t,this)}t(d).extend({start:function(){var e=this,t=e.ops,i=t.scope||k,n=i.document,o=t.ele,s=t.target||o,r=!1!==t.autoIndex,a=!!t.autoMask,c=!1!==t.autoCss,u=!1!==t.autoCursor,l=1==o.nodeType?+z(o,"z-index"):0,h=e.doDown,d=e.doMove,f=e.doUp,x=t.onCheck,v=t.onDown,p=t.onMove,m=t.onUp,b=function(t){for(var e=[],i=t||k;i.top!=i;){var n=i.parent;e.push(n),i=n}return e}(i),g=!!o.setCapture,y=!g&&0<b.length;F<=l&&(F=1+l),c&&D(o,"position","absolute"),c&&u&&D(s,"cursor","move"),t.center&&(N(o),e._api_resize=T.add(i,"resize",function(){N(o)}));var w=function(t){e._pause||(C(d,e,t),C(p,e,t))},Q=function(t){e._unbind(),g&&o.releaseCapture(),a&&R&&(R.remove(),R=null),U(),C(f,e,t),C(m,e,t)};return e._up=Q,e._api=T.add(s,"mousedown",function(t){if(!_(x)||!1!==x.call(e,t)){if(r)(+z(o,"z-index")||0)<F&&(F++,o.style.zIndex=F);e._unbind(),g?(o.setCapture(),e._bind(o,"losecapture",Q)):e._bind(i,"blur",Q),e._bind(n,{mousemove:w,mouseup:Q}),y&&e._bind(b,"mouseup",Q),a&&(R=R||new A({color:null,opacity:null,zIndex:999999}),X&&R.set({height:j.getScrollHeight()})),H(U,20),C(h,e,t),C(v,e,t)}}),e},_bind:function(){this._apis.push(T.add.apply(T,arguments))},_unbind:function(){var t=this._apis;0<t.length&&(t.forEach(function(t){t.off()}),this._apis=[])},pause:function(t){return this._pause=t,this._up&&this._up(),this},stop:function(){var t=this._api;return this._unbind(),t&&(t.off(),this._api=null),this},destroy:function(){var t=this._api_resize;return this.stop(),t&&(t.off(),this._api_resize=null),this}}),$.fn.extend({drag:function(i){return this.each(function(t,e){P(e,i)})}}),t(f).extend({find:function(t,e){return"string"==typeof t?l(t,e||this.box):n(t)},$:function(t,e){return $(this.find(t,e))},get:function(t,e){return this.find(t,e)[0]},fire:function(){return C(this.callback,this,this.data),this},getEventCallback:function(t,e){var i=this;return"hide"==t?function(){i.data=e,i.hide()}:"remove"==t?function(){i.data=e,i.remove()}:t},bind:function(t,e,i,n){return this._es.push(T.add(this.find(t),e,this.getEventCallback(i,n))),this},on:function(t,e,i,n){return this._es.push(T.add(this.box,t,e,this.getEventCallback(i,n))),this},show:function(){var t=this;return t.onShow&&t.onShow(),L(t.box),t.mbox&&t.mbox.show(),t},hide:function(){var t=this;return B(t.box),t.mbox&&t.mbox.hide(),t.onHide&&t.onHide(),t.fire()},toggle:function(){return r(this.box)?this.show():this.hide()},remove:function(){var t=this;if(t.box)return e(t.box),t.mbox&&t.mbox.hide(),t.dr&&t.dr.destroy(),t._es.forEach(function(t){t.off()}),t.box=t.mbox=t.dr=null,t.onRemove&&t.onRemove(),t.fire()}}),f.alias({$:"query",remove:"destroy"});var G={titleBox:"弹出框",titleAlert:"提示信息",titleConfirm:"确认信息",titlePrompt:"输入信息",titleClose:"点击关闭",titleLoading:"加载数据",buttonSubmit:"确定",buttonCancel:"取消",textLoading:"正在加载数据,请稍后…"};function x(v){return v=v||{},new f(function(){var o=this,t=v.width,e=v.height,i=y(v.maxHeight,j.getHeight()-60),n=!1!==v.drag,s=n&&!1!==v.center,r=v.className;o.ops=v,o.callback=v.callback;var a='<div class="x-head"><h2 class="x-title">'+(v.title||G.titleBox)+'</h2><a class="x-close" title="'+G.titleClose+'">X</a></div><div class="x-main"><div class="x-view">'+(v.html||"")+"</div></div>";X&&(a+='<iframe class="x-ie-fix" style="position: absolute;top:0;left:0;z-index:-1;" scrolling="no" frameborder="0"></iframe>');var c=I("div","x-box"+(r?" "+r:""),a);Q.body.appendChild(c),o.box=c;var u=v.zIndex||0;q<F&&(u=Math.max(u,F)),u&&(c.style.zIndex=u);var l=w(c),h=E(l);o.setTitle=function(t){return $(".x-title",l).html(t),o},o.setWidth=function(t){return v.width=t,M(c,t),C(v.resize,o),o},o.setHeight=function(t){return v.height=t,S(h,t-l.offsetHeight-20),o},o.setMaxHeight=function(t){v.maxHeight=t;var e=v.height;return b(e)&&t<e&&(e=t),c.scrollHeight>t&&(e=t,W(c,"x-box-auto")),b(e)&&o.setHeight(e),s&&N(c),C(v.resize,o),o},o.autoHeight=function(){var t=v.maxHeight;if(!t)return o;var e=o.get(".x-head").offsetHeight,i=t-e-20,n=t-e;return h.style.height=h.scrollHeight>n?i+"px":"auto",s&&N(c),o},b(t)&&M(c,t),l.offsetWidth<10&&M(l,c.offsetWidth),i?o.setMaxHeight(i):b(e)&&o.setHeight(e),!1!==v.mask&&(o.mbox="new"==v.mask?new A:O());var d=v.close||"hide",f=o.getEventCallback(d);o.bind(".x-close","click",d),!1!==v.esc&&o.bind(p,"keyup",function(t){27==t.keyCode&&f()});var x=v.time;g(x)&&H(f,x),C(v.init,o,c,v),n&&(o.dr=P(c,{target:l,center:s,shadow:v.shadow,autoMask:!0,onCheck:function(t){var e=t.target;return e&&"x-close"!=e.className}})),$(".x-ie-fix",c).width(c.offsetWidth-2).height(c.offsetHeight-2)})}function v(t){t.width||(t.width=320);var e=t.width;if(t.icon||t.iconHtml){var i='<div class="fl x-ico">'+(t.iconHtml||'<img alt="" src="'+t.icon+'"/>')+'</div><div class="fl x-dialog"'+(b(e)?' style="width:'+(e-60)+'px;"':"")+">"+t.html+'</div><div class="clear"></div>';t.html=i;var n=t.init;t.resize=function(){var t=this.get(".x-view").offsetWidth-this.get(".x-ico").offsetWidth;$(".x-dialog",this.box).width(t)},t.init=function(t,e){e.resize.call(this),C(n,this,t,e)}}else t.html='<div class="x-dialog">'+t.html+"</div>";return t.bottom&&(t.html+=t.bottom),t.close||(t.close="remove"),x(t)}function J(t,e){var i="inline-block w-button w-"+(e||"dark");return'<div class="x-bottom"><div class="'+i+' x-submit">'+G.buttonSubmit+"</div>"+(2==t?'<div class="'+i+' x-cancel">'+G.buttonCancel+"</div>":"")+"</div>"}function K(t,e,i,n){return"object"==typeof i&&(i=n=i),n=o({},n),_(i)&&(n.callback=i),n.title||(n.title=t),n.html=e,n}var V={createDialogBox:v,alert:function(t,e,i){return(i=K(G.titleAlert,t,e,i)).iconHtml='<div class="ico x-alert"></div>',v(i)},confirm:function(t,e,i){return(i=K(G.titleConfirm,t,e,i)).bottom||(i.bottom=J(2)),i.mask=!1!==i.mask,v(i).bind(".x-submit","click","remove",!0).bind(".x-cancel","click","remove",!1)},prompt:function(t,e,i){i=K(G.titlePrompt,a,e,i),e=i.callback,i.callback=a;var n='<div class="x-text">'+t+'</div><div class="x-input"><input type="'+(i.pwd?"password":"text")+'" /></div>';i.html=n,i.bottom||(i.bottom=J(2));var o=v(i),s=o.get(".x-input>input");s.focus(),s.value=y(i.value,"");function r(){!1!==C(e,s,s.value)?o.remove():c(s)}return o.bind(s,"keyup",function(t){13==t.keyCode?r():u(this)}),o.bind(".x-submit","click",r).bind(".x-cancel","click","remove")},bottom:J,showLoading:function(t){return(t=o({},t)).title||(t.title=G.titleLoading),t.html||(t.html=G.textLoading),t.iconHtml='<div class="ico x-loading"></div>',v(t)}};o(Q,V),o(Q,{getMaskBox:O,maskSetup:function(t,e){o(h,t,!0),e&&i&&i.reset(t)},setDrag:P,setBoxLang:function(t){o(G,t,!0)},MaskBox:A,DragX:d,Box:f,WinBox:x})}();