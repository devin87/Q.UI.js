//devin87@qq.com
//build:2016/07/26 17:22:28
!function(e){"use strict";function t(e){var t=this,n=e.box;t._$box=$(n),t._$ul=$(e.ul,n),t._$control=$(e.boxControl,n),t._$btnPrev=$(e.btnPrev,n),t._$btnNext=$(e.btnNext,n),t.auto=!!e.auto,t.way=e.way||"left",t.speed=e.speed||"slow",t.sleep=e.sleep||5e3,t.step=e.step||1,t.isSlideKeydown=e.isSlideKeydown!==!1,t.isStoppedHover=e.isStoppedHover!==!1,t.clsActive="slide-on",t.index=0,t.init()}var n=Q.fire,i=Q.factory;i(t).extend({init:function(){var e,t=this,n=t._$box,i=t._$ul,s=i.children(),o=t._$control,r=s.size();return i.prepend(s.last()[0].cloneNode(!0)),i.append(s.first()[0].cloneNode(!0)),r>1?o.html("<a></a>".repeat(r)):(t._$btnPrev.hide(),t._$btnNext.hide()),s=i.children(),s.each(function(e,n){n.style[t.way]=100*(e-1)+"%"}),e=o.children(),e.each(function(e){this.x=e}),t._$lis=s,t._$controls=e,t._cssBox=n.prop("className"),t.size=r,s.eq(1).addClass(t.clsActive),t.updateControl(0),t.auto&&t.start(),t.initEvent()},initEvent:function(){var e=this;return e.size>1&&(e._$control.on("click","a",function(){e.play(this.x)}),e._$btnPrev.click(function(){e.playPrev()}),e._$btnNext.click(function(){e.playNext()})),e.isSlideKeydown&&$(document).keydown(function(t){switch(t.keyCode){case 37:e.playPrev();break;case 39:e.playNext()}}),e.isStoppedHover&&e._$ul.hover(function(){e.stop()},function(){e.start()}),e},updateControl:function(e){var t=this,n=t._cssBox||"";return t._$box.prop("className",n+(n?" ":"")+"b"+(e+1)),t._$controls.prop("className","").eq(e).prop("className",t.clsActive),t},play:function(e){var t=this,i=t.clsActive,s=t._$ul,o=t._$lis,r=t.size;if(1>=r)return t;var a=e;a>=r?a=0:0>a&&(a=r-1),o.removeClass(i).eq(e+1).addClass(i),t.updateControl(a),n(t.onPlay,t,a);var l={};return l[t.way]=100*-e+"%",s.animate(l,t.speed,function(){e!=r&&-1!=e||(o.removeClass(i).eq(a+1).addClass(i),s.css(t.way,100*-a+"%"),t.index=a,n(t.onPlayed,t,a))}),t.index=e,t},playPrev:function(){return this.play(this.index-this.step)},playNext:function(){return this.play(this.index+this.step)},start:function(){var e=this;return e.size>1&&(e.timer=setTimeout(function(){e.playNext(),e.start()},e.sleep)),e},stop:function(){var e=this;return e.timer&&clearTimeout(e.timer),e}}),Q.Marquee=t}();